<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buscar productos - Mi Tienda</title>
    <!-- Enlazar con el archivo de estilos de Tailwind -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
    <!-- Enlazar con el archivo de DataTables CSS -->
    <link href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet">
  </head>

  <body>

    <header class="bg-gray-800 text-white py-4">
      <div class="container mx-auto flex justify-between items-center px-4">
        <h1 class="text-lg font-bold">Mi Tienda</h1>
        <nav>
          <ul class="flex space-x-4">
            <li><a href="http://localhost:3000/" class="hover:text-gray-300">Inicio</a></li>
            <li><a href="#" class="hover:text-gray-300">Productos</a></li>
            <li><a href="#" class="hover:text-gray-300">Contacto</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main class="container mx-auto my-8">
      <h2 class="text-2xl font-bold mb-4">Buscar productos</h2>
      <!-- Campo de texto para ingresar el parámetro de la consulta -->
      <input type="text" id="parametro" placeholder="Ingresa un nombre">
      <!-- Botón para actualizar la tabla -->
      <button id="actualizar">Actualizar tabla</button>
      <!-- Inicio de la DataTable -->
      <div class="table-responsive">
        <table id="tabla">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Tipo de movimiento</th>
              <th>Precio</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </main>

    <footer class="bg-gray-900 text-white py-4">
      <div class="container mx-auto px-4">
        <p class="text-center">&copy; 2022 Mi Tienda. Todos los derechos reservados.</p>
      </div>
    </footer>

    <!-- Enlazar con la biblioteca de jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <!-- Enlazar con el archivo de DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>

    <script>
      $(document).ready(function() {
        // Inicializa la dataTable
        var tabla = $('#tabla').DataTable();
        // Al hacer clic en el botón de actualizar
        $('#actualizar').on('click', function() {
          // Obtiene el parámetro ingresado por el usuario
          var parametro = $('#parametro').val();
          // Realiza la petición GET a la ruta /datos/:parametro
          $.get('/buscar/'+parametro, function(data) {
            // Borra los datos anteriores de la tabla
            tabla.clear();
            // Agrega los nuevos datos a la tabla
            tabla.rows.add(data);
            // Actualiza la dataTable
            tabla.draw();
          });
        });
      });
    </script>

  </body>
</html>